<style>
.remove-column {
    width: 15%;
}
.table {
  border: 0px solid #808080;
}
td {
  border: 0px solid #808080;
}
.table > thead > tr > th {
    vertical-align: bottom;
    border-bottom: 2px solid #ddd;
    border-top: 0px solid #ddd;
    border-right: 0px solid #ddd;
    border-left: 0px solid #ddd;
}
.image-circle {
    height: 6rem;
    width: 6rem;
    display: block;
    margin: auto;
    border-radius: 100%;
    display: inline-block;
}
.voffset5 {
    margin-top: 1rem;
}
.form-group {
    margin-bottom: 15px;
}
.add-button {
  display: table;
}
.add-button > img {
  vertical-align: middle;
  display: table-cell;
}
.add-button > span {
  vertical-align: middle;
  display: table-cell;
}
.step-buttons {
    margin-left: 25%;
}
.step-margin {
    margin-left: 1%;
}
</style>
<main class="appmain">
  <article class="campaign">
    <header class="page__header">
      <h1 class="heading--title">{{'Create Working Group' | translate}}</h1>
    </header>
    <section>
      <div id="newWorkingGroup" class="step-margin row view wGroupCreation">
        <form name="newAssemblyForm1">
          <br/>
            <div class="col-md-2"></div>
            <div class="col-md-12">
                <!--<div class="row col-md-12 col-sm-12">
                    <h1><strong>{{'Create Working Group' | translate}}</strong></h1>
                    <h2 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                        <span><strong>{{'Part of'|translate}}&nbsp;&nbsp;<a href="#/v1/assembly/{{assembly.assemblyId}}/forum">{{assembly.name}}</a></strong></span>
                    </h2>
                </div>-->
                <div id="description" class="row col-md-12 col-sm-12 box descriptionBox">
                    <p><strong>{{'Working groups' | translate}}</strong> {{'wgroups.purpose' | translate}}.</p>
                </div>
                <br/>
                <!-- Campaign Select if no campaign has been selected -->
                <div ng-if="selectCampaign" id="campaignSelect" class="row col-md-12 col-sm-12">
                    <h3 for="selectCampaignOfAssembly" class="no-padding col-sm-12 col-lg-12 col-md-12 col-xs-12 control-label">
                        {{'Campaigns of the Group'|translate}}:*</h3>
                    <div class="voffset4"></div>
                        <select id="selectCampaignOfAssembly" name="workingGroupAuthors"
                                class="form-control col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-model="campaignId"
                                ng-options="campaign.campaignId as campaign.title for campaign in assemblyCampaigns track by campaign.campaignId"
                                ng-change="changeCampaign(campaignId)">
                        </select>

                </div>
                <br/>

                <div id="workingGroupName" class="row col-md-12 col-sm-12">
                    <h3 for="inputNameNewWorkingGroup" class="no-padding col-sm-2 col-md-2 control-label">{{'Name' | translate}}*</h3>
                    <div class="voffset4"></div>
                    <input id="inputNameNewWorkingGroup" class="form-control"
                           placeholder="{{'wgroups.name.example' | translate}}"
                           ng-model="newWorkingGroup.name" type="text" ng-required="true">
                </div>
                <br/>

                <div id="workingGroupDescription" class="row col-md-12 col-sm-12">
                    <h3 for="inputDescriptionNewWorkingGroup" class="no-padding col-sm-2 col-md-2 control-label">
                        {{'Description'|translate}}*
                    </h3>
                    <textarea id="inputDescriptionNewWorkingGroup" class="form-control"
                              maxlength="400" placeholder="{{'wgroups.text.example' | translate}}"
                              ng-model="newWorkingGroup.text"/>
                </div>
                <br/>

                <div id="workingGroupThemes" class="row col-md-12 col-sm-12">
                    <h3 for="checkConfirmCampaignGoals" class="control-label">{{'wgroups.select.campaign.themes' | translate}}</h3>
                    <div class="box selectionBox col-md-12 col-sm-12" id="checkConfirmCampaignGoals">
                        <div class="themes-container-content optionThemes" ng-repeat="theme in campaignThemes track by $index">
                            <input type="checkbox" ng-model="campaignThemes[$index].selected">
                            <span>{{theme.title}}</span>
                        </div>
                    </div>
                </div>
                <br/>

                <div id="workingGroupIcon" class="row col-md-12">
                    <h3 class="control-label" translate='wgroups.select.icon'> </h3>
                    <div class="picsList">
                        <div ng-repeat="icon in defaultIcons">
                            <div class="col-md-4">
                                <div class="image-capsule">
                                    <img alt="{{icon.name}}" ng-src="{{icon.url}}"
                                         class="image-circle"
                                         ng-click="setNewWorkingGroupIcon(icon.url, icon.name)">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-md-4">
                                <div class="image-capsule" type="file" ngf-select="uploadFiles($file, $invalidFiles)"
                                     accept="image/*" ngf-max-size="10MB">
                                    <img data-src="holder.js/100x100" alt="Upload a picture"
                                         src="../assets/images/addIcon.png" data-holder-rendered="true"
                                         class="image-circle"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br/>

                <div id="groupIconProgress" class="col-md-12 progress-section">
                    <strong>{{'selected.icon'|translate}}: </strong><a ng-href="{{f.url}}">{{f.name}}</a> {{f.$error}} {{f.$errorParam}}
                        <span class="progress-line-container" ng-show="f.progress >= 0">
                            <div class="progress-line" style="width:{{f.progress}}%" ng-bind="f.progress + '%'"></div>
                        </span>
                </div>
                <br/>

                <div id="workingGroupMembership" class="row col-md-12">

                    <div class="voffset3"></div>
                    <div class="col-md-4">
                      <h3 class="control-label">{{'How do people become members?' | translate}}</h3>
                        <div class="radio">
                            <label>
                                <input type="radio" name="membership" id="openRadio" value="OPEN"
                                       ng-model="newWorkingGroup.profile.membership">
                                {{'Opened' | translate}}
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="membership" id="registrationRadio" value="REGISTRATION"
                                       ng-model="newWorkingGroup.profile.membership"> {{'Registration' | translate}}
                            </label>
                        </div>
                    </div>
                    <div class="col-md-8 optionsBox"
                         ng-show="newWorkingGroup.profile.membership === 'REGISTRATION'">
                        <h3 class="optionsBox-title">{{'Membership by registration' | translate}}</h3>
                        <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.supportedMembershipRegistration' | translate}}"></i>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" ng-model="newWorkingGroup.profile.registration.invitation"/>
                                <p>{{'By invitation' | translate}}, {{'and/or' | translate}}</p>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" ng-model="newWorkingGroup.profile.registration.request" checked/>
                                <p>{{'By request' | translate}}</p>
                            </label>
                        </div>
                    </div>
                </div>
                <br/>

                <div class="col-md-12 voffset3"></div>
                <div id="groupManagement" class="row col-md-12">
                    <h3 for="inputManagementType" class="control-label">
                        {{'Who will be able to change settings and remove inappropriate comments?' | translate}}
                    </h3>
                    <div class="voffset3"></div>
                    <div class="col-md-12 grayBox" id="inputManagementType">
                        <label class="control-label">
                            {{'Moderators' | translate}}
                            <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.moderators' | translate}}"></i>
                        </label>
                        <div class="col-md-12 radio">
                            <input ng-model="newWorkingGroup.profile.moderators" type="radio" name="moderators" id="noRadio" value="two" checked>
                            {{'Nominate specific moderators (at least two)' | translate}}
                        </div>
                        <div class="col-md-12 radio">
                            <input ng-model="newWorkingGroup.profile.moderators" type="radio" name="moderators" id="noRadio" value="all">
                            {{'Make all group members moderators' | translate}}
                        </div>
                        <div class="col-md-12 radio">
                            <input ng-model="newWorkingGroup.profile.moderators" type="radio" name="moderators" id="noRadio" value="none">
                            {{'Have no moderators' | translate}}
                        </div>

                        <div class="voffset3"></div>
                        <label class="control-label">
                            {{'Coordinators' | translate}}
                            <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.coordinators' | translate}}"></i>
                        </label>
                        <div class="col-md-12 radio">
                            <input ng-model="newWorkingGroup.profile.coordinators" type="radio" name="coordinators" id="noRadio" value="two" checked>
                            {{'Nominate specific coordinators (at least two)' | translate}}
                        </div>
                        <div class="col-md-12 radio">
                            <input ng-model="newWorkingGroup.profile.coordinators" type="radio" name="coordinators" id="noRadio" value="all">
                            {{'Make all group members coordinators' | translate}}
                        </div>
                        <div class="col-md-12 radio">
                            <input ng-model="newWorkingGroup.profile.coordinators" type="radio" name="coordinators" id="noRadio" value="none">
                            {{'Have no coordinators' | translate}}
                        </div>
                    </div>
                </div>

                <!-- TODO: Add brainstorming contributions -->
                <div id="brainstormingContributions" class="row col-md-12">
                    <h3 class="control-label">
                        {{'Select brainstorming contributions to develop' | translate}}
                        <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.select.brainstorming' | translate}}"></i>
                    </h3>

                    <!--TODO: FIX PAGINATION
                    <div ng-if="contribsPageSize<contributions.length" class="row col-lg-12 col-md-12 col-sm-12 col-xs-12">-->
                        <!--<button ng-disabled="contribsCurrentPg === 0" ng-click="contribsCurrentPg=contribsCurrentPg-1">-->
                            <!--Previous contributions-->
                        <!--</button>-->
                        <!--{{contribsCurrentPg+1}}/{{contribsNumberOfPages()}}-->
                        <!--<button ng-disabled="contribsCurrentPg >= contributions.length/contribsPageSize - 1" ng-click="contribsCurrentPg=contribsCurrentPg+1">-->
                            <!--Next contributions-->
                        <!--</button>-->
                    <!--</div>-->
                    <!--<div ng-repeat="contribution in contributions | startFrom:contribsCurrentPg*contribsPageSize | limitTo:contribsPageSize track by $index">-->
                    <div ng-repeat="contribution in contributions track by $index">
                        <div class="checkbox" ng-if="contribution.type === 'BRAINSTORMING'">
                            <label>
                                <input type="checkbox" ng-model="contribution.addToGroup"/>
                            </label>
                            <span>{{contribution.title | limitTo:46}}{{contribution.title.length > 46 ? '...' : '.'}}</span>
                        </div>
                    </div>
                </div>
                <br/>

                <!-- Invitations for members -->
                <div id="groupInvitations" class="row col-md-12">
                    <h3 class="control-label">
                        {{'Invite people to join' | translate}}
                        <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.invitations' | translate}}"></i>
                    </h3>

                    <div class="col-lg-12col-md-12 col-sm-12">
                        <h3 class="control-label">{{'Choose from the list of members of the assembly' | translate}}</h3>
                    </div>
                    <!-- TODO: FIX PAGINATION
                    <div ng-if="membersPageSize<assemblyMembers.length" class="row col-lg-12 col-md-12 col-sm-12 col-xs-12">-->
                        <!--<button ng-disabled="membersCurrentPg === 0" ng-click="membersCurrentPg=membersCurrentPg-1;">-->
                            <!--Previous members-->
                        <!--</button>-->
                        <!--{{membersCurrentPg+1}}/{{membersNumberOfPages()}}-->
                        <!--<button ng-disabled="membersCurrentPg >= assemblyMembers.length/membersPageSize - 1" ng-click="membersCurrentPg=membersCurrentPg+1;">-->
                            <!--Next members-->
                        <!--</button>-->
                    <!--</div>-->
                    <!--<div ng-repeat="member in assemblyMembers | startFrom:membersCurrentPg*membersPageSize | limitTo:membersPageSize track by $index">-->
                    <div ng-repeat="member in assemblyMembers track by $index">
                        <div class="checkbox" ng-if="member.user.email!=user.email">
                            <label>
                                <input type="checkbox" ng-model="member.invite"
                                       ng-click="addAssemblyMemberToInvitationList(member,$index)"/>
                            </label>
                            <span><strong>{{member.user.name}}</strong> ({{member.user.email}})</span>
                        </div>
                    </div>

                    <div class="col-lg-12col-md-12 col-sm-12">
                        <h3 class="control-label">{{'Add emails of new members who are not in the assembly yet' | translate}}</h3>
                    </div>
                    <textarea class="form-control" id="invitees" rows="4" ng-model="inviteesEmails"></textarea>

                    <div class="col-md-12 voffset3"></div>
                    <div class="col-md-8 col-sm-8"></div>

                    <div class="col-md-4 col-sm-4 add-button">
                        <span><a ng-click="addEmailsToList(inviteesEmails)">
                            <img data-src="holder.js/100x100" alt="100x100" src="../assets/images/addIcon.png"
                                 data-holder-rendered="true" style="cursor: pointer; height: 25px; width:25px;">
                        </a></span>
                        <span><h5 width="50px;">{{'Add to list'|translate}}</h5></span>
                    </div>
                    <div class="col-md-12 voffset3"></div>
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th class="remove-column"></th>
                            <th class="email-column">{{'Email' | translate}}</th>
                            <th class="coordinator-column">{{'Coordinator' | translate}}</th>
                            <th class="moderator-column">{{'Moderator' | translate}}</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="invitee in newWorkingGroup.invitations track by $index">
                            <td class="remove-column">
                                <span class="glyphicon glyphicon-remove" aria-hidden="true" ng-click="removeInvitee($index)"></span>
                            </td>
                            <td class="email-column">{{invitee.email}}</td>
                            <td class="coordinator-column">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="invitee.coordinator"/>
                                    </label>
                                </div>
                            </td>
                            <td class="moderator-column">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="invitee.moderator"/>
                                    </label>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <br/>
                    <uib-alert ng-repeat="email in invalidEmails track by $index" type="danger" close="removeInvalidEmail($index)">{{'Invalid email(s)' | translate}}: {{email}} </uib-alert>
                </div>
                <br/>

                <div class="col-md-12 voffset3"></div>
                <div id="groupInvitationsEmails" class="row col-md-12">
                    <h3 class="control-label">
                        {{'Invitation Email' | translate}}
                        <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.invitationsEmail' | translate}}"></i>
                    </h3>
                    <textarea class="form-control" id="invitationEmail" ng-model="newWorkingGroup.invitationEmail" rows="6"></textarea>
                </div>
                <br/>

                <div id="groupConfigs" class="row col-md-12">
                    <div class="checkbox">
                        <h3>
                            <strong>{{'Majority threshold' | translate}}</strong>
                            <select ng-model="newWorkingGroup.majorityThreshold" id="newWorkingGroupThreshold">
                                <option value="simple" selected>{{'Simple' | translate}}</option>
                                <option value="66">66%</option>
                                <option value="90">90%</option>
                            </select>
                        </h3>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input ng-model="newWorkingGroup.blockMajority" type="checkbox" name="newWorkingGroupBlocking" id="newWorkingGroupBlocking" value="newWorkingGroupBlocking">
                            <h4>{{'Enable blocking' | translate}}</h4>
                        </label>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" ng-model="newAssembly.listed"/>
                            <h4>
                                {{'Do you want your Working Group to be listed?' | translate}}
                                <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.listedAssembly' | translate}}"></i>
                            </h4>
                        </label>
                    </div>
                </div>
                <br/>

                <div class="col-md-12 voffset5"></div>
                <div class="row step-buttons col-md-12">
                  <input type='submit' value="{{'Create' | translate}}" ng-click="createWorkingGroup()" class="button col-md-4 col-md-4">
                </div>
                <div class="col-md-12 voffset5"></div>
            </div>
            <div class="col-md-12 voffset5"></div>
            <div class="col-md-12 voffset5"></div>
          </form>
      </div>
    </section>
  </article>
</main>
